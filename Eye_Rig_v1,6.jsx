
		if(!$["_extAutomationBlocks"]) {
			alert("Automation Blocks is not initialized. To run this script make sure the extension Automation Blocks is installed.");
			throw new Error("could not find Automation Blocks API");
		}
		
	(function(thisObj){
		$._extAutomationBlocks.all.abDestructor.announceEndPoint("main script");
		var myResult;
		try {
			app.beginUndoGroup("Automation Blocks");
			myResult = JSON.stringify({status:"SUCCESS", data: eval("var user_input_1, list, las_Layer, new_layer_var, mid_L;\n\n\n$._extAutomationBlocks.all.messageAboutExecuteBlock('rUbh7w_+(+IOh_qOqxND');\nif (true) {\n  $._extAutomationBlocks.all.messageAboutExecuteBlock('~$#+a|}exWrTX!}o,T]+');\n\n  \t dialogResult = $._extAutomationBlocks.all.EsDialogs.showCustomDialog([{type:'CHECKBOX', value:user_input_1,label:'debug (нитисніть T щоб було наочно видно)'}],{allowCancel:true});\n  \t if(!dialogResult) throw new Error(\"user canceled\");\n  \t user_input_1=dialogResult[0];\n  \t $._extAutomationBlocks.all.messageAboutExecuteBlock('=.nsgGo?y-XdCG*;8`3h');\n  list = ($._extAutomationBlocks.AeLayer.getLayers(($._extAutomationBlocks.AeComp.getActiveComp()), {onlySelected:true,sortSelection:true, typeArray: [\"Layer\"]}));\n  $._extAutomationBlocks.all.messageAboutExecuteBlock('Fm^eiYfmt~%#7hAq2dSP');\n  if (list.length == 3) {\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('{eDJNy$T)/U8#?AwLcHH');\n    if (user_input_1) {\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('%wNrp6o!W4G[NMy8]:7H');\n      (function(){\n      \t\t\tvar message = $._extAutomationBlocks.all.EsString.esToString('все віділено правильно');\n      \t\t\talert(message);\n\n      \t})();\n    }\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('aR6G.Ib|akGW7P*v-nSt');\n    las_Layer = list.pop();\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('^(J|#dE-meMBcsYnlObm');\n    if (user_input_1) {\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('`oU:.:=oXBq#B68@6hb*');\n      $._extAutomationBlocks.AeComp.selectLayers(las_Layer, {mode:\"SELECT\"});\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('^L{ChE)K~=:4vJ,pnCP9');\n      (function(){\n      \t\t\tvar message = $._extAutomationBlocks.all.EsString.esToString(('останній шар -> ' + String(las_Layer)));\n      \t\t\talert(message);\n\n      \t})();\n    }\n    $._extAutomationBlocks.all.messageAboutExecuteBlock(',V?[aQCGE9D~2``QN$W{');\n    new_layer_var = $._extAutomationBlocks.AeLayer.duplicate(las_Layer);\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('T)udUagDlj~/|eu|`J^t');\n    if (user_input_1) {\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('2VMIdTD~cUFQd_;w8lb?');\n      $._extAutomationBlocks.AeComp.selectLayers(new_layer_var, {mode:\"SELECT\"});\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('zAacsW2%LODtUS1%FP|*');\n      (function(){\n      \t\t\tvar message = $._extAutomationBlocks.all.EsString.esToString(('створено дублікат -> ' + String(new_layer_var)));\n      \t\t\talert(message);\n\n      \t})();\n    }\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('%f?tO8{Kblbj1Qqwk1-R');\n    $._extAutomationBlocks.AeProperty.applyKeyframeJson(('[{\"isKeyframe\":true,\"value\":100,\"time\":0,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":0,\"time\":0.04287109375,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":0.17151692708333,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":1.50065104166667,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":0,\"time\":1.54352213541667,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":1.67216796875,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":3.98743489583333,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":0,\"time\":4.03033854166667,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":4.15895182291667,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":5.83111979166667,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":0,\"time\":5.87399088541667,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":6.00260416666667,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":6.47425130208333,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":0,\"time\":6.51712239583333,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":6.64573567708333,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":9.04680989583333,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":0,\"time\":9.08968098958333,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":9.21829427083333,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":10.0329427083333,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":0,\"time\":10.0758138020833,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":10.2044596354167,\"InInterpolationType\":\"LINEAR\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false},{\"isKeyframe\":true,\"value\":100,\"time\":10.9333333333333,\"InInterpolationType\":\"HOLD\",\"OutInterpolationType\":\"HOLD\",\"InTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"OutTemporalEase\":[{\"influence\":16.666666667,\"speed\":0}],\"TemporalContinuous\":false,\"TemporalAutoBezier\":false}]'),($._extAutomationBlocks.AeLayer.toLayer(las_Layer) + '/' + 'ADBE Transform Group/ADBE Opacity'), {\n    \t\tmergeStrategy: [('none'),('none')],\n    \t\tstartTime: null\n    \t});\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('(/jt~;~tjHyoNgxf#W0*');\n    if (user_input_1) {\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('^IX#[7kp[yl#thsxK)u(');\n      $._extAutomationBlocks.AeProperty.setAttribute(($._extAutomationBlocks.AeLayer.toLayer(las_Layer) + '/' + 'ADBE Transform Group/ADBE Opacity'), 'SELECTED', (true));\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('X6vL7qCfkzVw[R5mB#|6');\n      $._extAutomationBlocks.AeComp.selectLayers(las_Layer, {mode:\"SELECT\"});\n      $._extAutomationBlocks.all.messageAboutExecuteBlock(']g8WADl.q;WWbdgN].kS');\n      (function(){\n      \t\t\tvar message = $._extAutomationBlocks.all.EsString.esToString(('додана анімація ключами на шар ' + String(las_Layer)));\n      \t\t\talert(message);\n\n      \t})();\n    }\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('MN,Ne}%c?-X%(AFdW[K$');\n    $._extAutomationBlocks.AeProperty.setAttribute(($._extAutomationBlocks.AeLayer.toLayer(las_Layer) + '/' + 'ADBE Transform Group/ADBE Opacity'), 'EXPRESSION', ('loopIn(\"Cycle\") + loopOut(\"Cycle\") - value;'));\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('5U4JF8+U2S[hQ|ElH:u2');\n    if (user_input_1) {\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('Sq^LW9w0_}`o*WIL+hW*');\n      (function(){\n      \t\t\tvar message = $._extAutomationBlocks.all.EsString.esToString(('доданий loopOut на шар ' + String(las_Layer)));\n      \t\t\talert(message);\n\n      \t})();\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('A7),po(j#l#,.6m025Nc');\n      $._extAutomationBlocks.AeComp.selectLayers(las_Layer, {mode:\"SELECT\"});\n    }\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('YK:t)q9|6c/r9tQT_ijF');\n    $._extAutomationBlocks.AeProperty.setAttribute(($._extAutomationBlocks.AeLayer.toLayer(new_layer_var) + '/' + 'ADBE Transform Group/ADBE Opacity'), 'EXPRESSION', (['thisComp.layer(\"',$._extAutomationBlocks.AeLayer.getAttribute(las_Layer, 'NAME'),'\").transform.opacity'].join('')));\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('z`]jU^=VD%p$:[CswLCr');\n    if (user_input_1) {\n      $._extAutomationBlocks.all.messageAboutExecuteBlock(':k0R9cfFxBssGuIE{WW(');\n      (function(){\n      \t\t\tvar message = $._extAutomationBlocks.all.EsString.esToString(('прив\\'язка прозорості шару  ' + String(new_layer_var)));\n      \t\t\talert(message);\n\n      \t})();\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('Ee`T%2K(bQyi}S)7d86b');\n      $._extAutomationBlocks.AeComp.selectLayers(new_layer_var, {mode:\"SELECT\"});\n    }\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('FSHIlcD!bdy5xE??OU[h');\n    $._extAutomationBlocks.AeLayer.setAttribute(new_layer_var, 'INDEX', (($._extAutomationBlocks.AeLayer.getAttribute(new_layer_var, 'INDEX')) - 1));\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('j/1yF%LGje@f75ba$B)^');\n    if (user_input_1) {\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('6]*L1jaPq3n{_6OlF0x)');\n      $._extAutomationBlocks.AeComp.selectLayers(new_layer_var, {mode:\"SELECT\"});\n      $._extAutomationBlocks.all.messageAboutExecuteBlock(':JWKtIfM-$%Gd8PTLEUs');\n      (function(){\n      \t\t\tvar message = $._extAutomationBlocks.all.EsString.esToString(('зміна індексу шару  ' + String(new_layer_var)));\n      \t\t\talert(message);\n\n      \t})();\n    }\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('@AtnWOmxhoO?_^o{.8%h');\n    mid_L = list.pop();\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('t2%%j$|^4V_Dk1eXhOOF');\n    $._extAutomationBlocks.AeLayer.setAttribute(mid_L, 'TRACK_MATTE_TYPE', ('Alpha'));\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('B/.!mxb]+JZ[5;l}R]I1');\n    if (user_input_1) {\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('snESn0k0{J*FocKlMM+)');\n      $._extAutomationBlocks.AeComp.selectLayers(mid_L, {mode:\"SELECT\"});\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('CtIGCvuyc]totFe-NDm@');\n      (function(){\n      \t\t\tvar message = $._extAutomationBlocks.all.EsString.esToString(('трек мат шару  ' + String(mid_L)));\n      \t\t\talert(message);\n\n      \t})();\n    }\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('_9[r+lf(^,e`bN4Pd3;%');\n    $._extAutomationBlocks.AeProperty.setAttribute(($._extAutomationBlocks.AeLayer.toLayer(mid_L) + '/' + 'ADBE Transform Group/ADBE Opacity'), 'EXPRESSION', (['thisComp.layer(\"',$._extAutomationBlocks.AeLayer.getAttribute(las_Layer, 'NAME'),'\").transform.opacity'].join('')));\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('U(Uw}jcz2-{W5h:~/[j@');\n    if (user_input_1) {\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('+CzLmuuzmk65{;[q]_-;');\n      $._extAutomationBlocks.AeComp.selectLayers(mid_L, {mode:\"SELECT\"});\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('%`fefHQL*X(l.{+Ycvq-');\n      (function(){\n      \t\t\tvar message = $._extAutomationBlocks.all.EsString.esToString(('прив\\'язка прозорості шару  ' + String(mid_L)));\n      \t\t\talert(message);\n\n      \t})();\n    }\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('WY()D!!dnH^u;He4unxL');\n    $._extAutomationBlocks.AeProperty.setAttribute(($._extAutomationBlocks.AeLayer.toLayer((list.shift())) + '/' + 'ADBE Transform Group/ADBE Opacity'), 'EXPRESSION', (String(['thisComp.layer(\"',$._extAutomationBlocks.AeLayer.getAttribute(las_Layer, 'NAME'),'\").transform.opacity'].join('')) + ' == 100 ? 0 : 100'));\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('dIydH%U~#5GZ)4`-GIyY');\n    if (user_input_1) {\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('Iy+mPg$AGM3pvcn60,z^');\n      $._extAutomationBlocks.AeComp.selectLayers(mid_L, {mode:\"SELECT\"});\n      $._extAutomationBlocks.all.messageAboutExecuteBlock('mf?kVn/wFu~x?q8CGOlX');\n      (function(){\n      \t\t\tvar message = $._extAutomationBlocks.all.EsString.esToString(('прив\\'язка оберненої прозорості шару  ' + String(mid_L)));\n      \t\t\talert(message);\n\n      \t})();\n    }\n  } else {\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('y3+Za=3XqXcVIiTW;U6Y');\n    (function(){\n    \t\t\tvar message = $._extAutomationBlocks.all.EsString.esToString(('selection error:' + String(list)));\n    \t\t\talert(message);\n\n    \t})();\n  }\n}\n")});
		}
		catch(err){
			myResult = JSON.stringify({status:"ERROR", data:""+err.message+" (line "+(err.line)+")"});
		}
		finally {
			app.endUndoGroup();
			try{
			$._extAutomationBlocks.all.abDestructor.notifyEndPointReached("main script");
			}
			catch(err){
				myResult = JSON.stringify({status:"ERROR", data:""+err.message+" (line "+(err.line)+")"});
			}
		}
		return myResult;
	})(this)
	