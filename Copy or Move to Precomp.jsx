
		if(!$["_extAutomationBlocks"]) {
			alert("Automation Blocks is not initialized. To run this script make sure the extension Automation Blocks is installed.");
			throw new Error("could not find Automation Blocks API");
		}
		
	(function(thisObj){
		$._extAutomationBlocks.all.abDestructor.announceEndPoint("main script");
		var myResult;
		try {
			app.beginUndoGroup("Automation Blocks");
			myResult = JSON.stringify({status:"SUCCESS", data: eval("var precomp_choice, null_source, delete_original, temp_null, my_precomp, precomp_layer, precomp, precomp_start_time, processed_layers_in_main_comp, my_layer, layer_in_precomp;\n\n// Describe this function...\nfunction get_precomp_choice_option() {\n  $._extAutomationBlocks.all.messageAboutExecuteBlock('7_VGGRd{6PC],EGZ_6jg');\n  $._extAutomationBlocks.all.messageAboutExecuteBlock('Ekf6J}2YLt_I.QVwS%XO');\n  precomp_choice = [];\n  $._extAutomationBlocks.all.messageAboutExecuteBlock('nCi$#t3gJyF_^hAvsz=;');\n  var my_precomp_list = $._extAutomationBlocks.AeLayer.getLayers(($._extAutomationBlocks.AeComp.getActiveComp()), {recursively: false,onlySelected:false,sortSelection:false, typeArray: [\"PrecompLayer\"],returnItem:true});\n  for (var my_precomp_index =0; my_precomp_index< my_precomp_list.length;my_precomp_index++) {\n    try { my_precomp = $._extAutomationBlocks.AeUtility.toPath(my_precomp_list[my_precomp_index]);}\n  \t\tcatch(e) {\n  \t\t\t$._extAutomationBlocks.all.log(\"skipped loop iteration:\"+e.message);\n  \t\t\tcontinue;\n  \t\t}\n  \t\t  $._extAutomationBlocks.all.messageAboutExecuteBlock('oio#V}$favvM$AKgfOsQ');\n    precomp_choice.push(($._extAutomationBlocks.all.EsString.replaceDollarPattern('$1:$2',[$._extAutomationBlocks.AeLayer.getAttribute(my_precomp, 'INDEX'),$._extAutomationBlocks.AeLayer.getAttribute(my_precomp, 'NAME')])));\n    $._extAutomationBlocks.all.messageAboutExecuteBlock('nCi$#t3gJyF_^hAvsz=;');\n  }\n  $._extAutomationBlocks.all.messageAboutExecuteBlock('7_VGGRd{6PC],EGZ_6jg');\n  return precomp_choice.join('|');\n}\n\n\n$._extAutomationBlocks.all.messageAboutExecuteBlock('4Un.wa(4LOK|`T%;^McJ');\n\n$._extAutomationBlocks.all.messageAboutExecuteBlock('l1.B7z()HC6VeR_#I)GM');\nprecomp_choice = get_precomp_choice_option();\n$._extAutomationBlocks.all.messageAboutExecuteBlock('5S#:v[444!dc#R`X/}w^');\ndelete_original = false;\n$._extAutomationBlocks.all.messageAboutExecuteBlock('/2A7gB5+/qCWw;XMRoqf');\nif (!precomp_choice.length) {\n  $._extAutomationBlocks.all.messageAboutExecuteBlock('L12DfTzQ+FR;zmh?z?ja');\n  (function(){\n  \t\t\tvar message = $._extAutomationBlocks.all.EsString.esToString(('cannot move layers to precomp' + '\\n' +\n  '(active comp contains no precomps)'));\n  \t\t\talert(message);\n  \t\t\tthrow new Error(message)\n  \t})();\n}\n$._extAutomationBlocks.all.messageAboutExecuteBlock('NV/_JBxVo+4%.Wvn]ef:');\n\n\t dialogResult = $._extAutomationBlocks.all.EsDialogs.showCustomDialog([{type:'DROPDOWN', value:precomp_choice,label:'copy to precomp layer'},{type:'CHECKBOX', value:delete_original,label:'delete original'}],{allowCancel:true});\n\t if(!dialogResult) throw new Error(\"user canceled\");\n\t precomp_choice=dialogResult[0];\ndelete_original=dialogResult[1];\n\t // we replace a string like\n// \"3:my layer name\" by\n// \"::3\", i.e. only keep the number and prepend a ::The result is the path for the respective layer in the active composition (since layers can be accessed by index and :: refers to the active comp)\n$._extAutomationBlocks.all.messageAboutExecuteBlock('dCepY2f|gVyi|oK2czVW');\nprecomp_layer = ($._extAutomationBlocks.all.EsString.stringReplace(precomp_choice,'(\\\\d+):.*','::$1','REPLACE_FIRST',(false),(true)));\n$._extAutomationBlocks.all.messageAboutExecuteBlock('HFV{elLq5QT)^L{Ix@NW');\nprecomp = ($._extAutomationBlocks.AeLayer.getAttribute(precomp_layer, 'SOURCE'));\n$._extAutomationBlocks.all.messageAboutExecuteBlock('I(|S6kdC$o8NLeL%FdLa');\nprecomp_start_time = ($._extAutomationBlocks.AeLayer.getAttribute(precomp_layer, 'START_TIME'));\n$._extAutomationBlocks.all.messageAboutExecuteBlock('TuhH%Ndy9[Qn]c@D6D$F');\ntemp_null = $._extAutomationBlocks.AeComp.addLayer(precomp,{type: \"NULL\",name:'temp null'});\n$._extAutomationBlocks.all.messageAboutExecuteBlock('!;gBoY2^5T^W?l89,hMW');\nprocessed_layers_in_main_comp = [];\n$._extAutomationBlocks.all.messageAboutExecuteBlock(']E(f_`4xNqOiURZeu,{e');\nvar my_layer_list = $._extAutomationBlocks.AeLayer.getLayers(($._extAutomationBlocks.AeComp.getActiveComp()), {recursively: false,onlySelected:true,sortSelection:true, typeArray: [\"Layer\"],returnItem:true});\nfor (var my_layer_index =0; my_layer_index< my_layer_list.length;my_layer_index++) {\n  try { my_layer = $._extAutomationBlocks.AeUtility.toPath(my_layer_list[my_layer_index]);}\n\t\tcatch(e) {\n\t\t\t$._extAutomationBlocks.all.log(\"skipped loop iteration:\"+e.message);\n\t\t\tcontinue;\n\t\t}\n\t\t  $._extAutomationBlocks.all.messageAboutExecuteBlock('0*~#D;u)pViEZQZ,ZLiv');\n  layer_in_precomp = $._extAutomationBlocks.AeLayer.copyToComp(my_layer,precomp);\n  $._extAutomationBlocks.all.messageAboutExecuteBlock('ZqbvEhV(r(+6z3!Vl-(s');\n  $._extAutomationBlocks.AeLayer.setAttribute(layer_in_precomp, 'START_TIME', (($._extAutomationBlocks.AeLayer.getAttribute(my_layer, 'START_TIME')) - precomp_start_time));\n  $._extAutomationBlocks.all.messageAboutExecuteBlock('P9uCiS0Xe{OLso{JHA=8');\n  $._extAutomationBlocks.AeLayer.setAttribute(layer_in_precomp, 'INDEX', (-1));\n  $._extAutomationBlocks.all.messageAboutExecuteBlock('a*l!f7B;$]uiN6!Y}/QT');\n  $._extAutomationBlocks.AeLayer.setAttribute(layer_in_precomp, 'PARENT', temp_null);\n  $._extAutomationBlocks.all.messageAboutExecuteBlock('Gt#!5t[Vid5_?P,X8(O~');\n  processed_layers_in_main_comp.push(my_layer);\n  $._extAutomationBlocks.all.messageAboutExecuteBlock(']E(f_`4xNqOiURZeu,{e');\n}\n$._extAutomationBlocks.all.messageAboutExecuteBlock('GAusN8zx.(LS2[4Yk1NW');\n$._extAutomationBlocks.AeProperty.setAttribute(($._extAutomationBlocks.AeLayer.toLayer(temp_null) + '/' + 'ADBE Transform Group/ADBE Position'), 'VALUE', ($._extAutomationBlocks.AeLayer.transform(($._extAutomationBlocks.AeProperty.getAttribute(($._extAutomationBlocks.AeLayer.toLayer(temp_null) + '/' + 'ADBE Transform Group/ADBE Position'), 'VALUE')),($._extAutomationBlocks.AeComp.getActiveComp()),precomp_layer, {\n\t\ttime: null\n\t})));\n$._extAutomationBlocks.all.messageAboutExecuteBlock('2t:$hn@6EE^1Sc1i`kOw');\nif (delete_original) {\n  $._extAutomationBlocks.all.messageAboutExecuteBlock(')z=@EC*)@l}CTB;_;#|;');\n  $._extAutomationBlocks.AeLayer.remove(processed_layers_in_main_comp);\n}\n\n$._extAutomationBlocks.all.messageAboutExecuteBlock('NZbs;anx)WIuBO}zU9V*');\n\n$._extAutomationBlocks.all.messageAboutExecuteBlock('oTzmn}%=_0F%bbTc|4^2');\nnull_source = ($._extAutomationBlocks.AeLayer.getAttribute(temp_null, 'SOURCE'));\n$._extAutomationBlocks.all.messageAboutExecuteBlock('JRHLU|Z[EP}0~1bl:Aj7');\n$._extAutomationBlocks.AeLayer.remove(temp_null);\n$._extAutomationBlocks.all.messageAboutExecuteBlock('f1-k5:3BV(dmee{DScNF');\n$._extAutomationBlocks.AeProject.deleteProjectItems(null_source);\n")});
		}
		catch(err){
			myResult = JSON.stringify({status:"ERROR", data:""+err.message+" (line "+(err.line)+")"});
		}
		finally {
			app.endUndoGroup();
			try{
			$._extAutomationBlocks.all.abDestructor.notifyEndPointReached("main script");
			}
			catch(err){
				myResult = JSON.stringify({status:"ERROR", data:""+err.message+" (line "+(err.line)+")"});
			}
		}
		return myResult;
	})(this)
	